message ( STATUS "" )
message ( STATUS " _..::: Configuring Providers :::.._ " )
message ( STATUS "" )

# AUTODETECT USER MODULES AND ADD THEM TO THE BUILDING TREE

file ( GLOB FilesInDir . * )

foreach ( afile ${FilesInDir} )
    if ( IS_DIRECTORY ${afile} )
        set ( theSubDirs ${theSubDirs}  ${afile}  )
        message ( STATUS "Module ${afile} detected and added to the building tree" )
    endif ( IS_DIRECTORY ${afile} )
endforeach ( afile )


file ( WRITE  providerRegistry.h   "/*************************************************************  \n" )
file ( APPEND providerRegistry.h   "****** WARNING AUTOGENERATED FILE - DO NOT EDIT MANUALY ******  \n" )
file ( APPEND providerRegistry.h   "*************************************************************/  \n" )


foreach ( subdir ${theSubDirs} )
    add_subdirectory( ${subdir} )
endforeach ( subdir ${theSubDirs} )

# Back propagate TargetLinkLibraries variable in order to 
# make available the library names to the linker
set ( TargetLinkLibraries ${TargetLinkLibraries} PARENT_SCOPE)


